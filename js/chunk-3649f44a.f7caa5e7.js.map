{"version":3,"sources":["webpack:///./src/views/Login.vue?be13","webpack:///./src/views/Login.vue?fcf8","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?9c03","webpack:///./src/views/Login.vue"],"names":["_node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_4ea5255e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_4ea5255e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","placeholder","model","value","ruleForm","callback","$$v","$set","expression","type","_s","dengluCheck","size","nativeOn","!click","$event","denglu","username","password","on","click","goto","staticRenderFns","vue_runtime_esm","component","mint_ui_common","name","Loginvue_type_script_lang_js_","data","methods","path","$router","push","value1","value2","_this","key","localStorage","getItem","iv","_crypto_js_3_1_9_1_crypto_js_default","a","enc","Utf8","parse","encrypted","AES","encrypt","toString","$axios","get","params","uname","then","_ref","status","_token","setItem","$store","commit","replace","_ref2","console","log","forEach","item","components","myHead","mineHead","views_Loginvue_type_script_lang_js_","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-3649f44a.f7caa5e7.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=4ea5255e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=4ea5255e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('myHead'),_c('h1',[_vm._v(\"登录\")]),_c('div',{staticClass:\"denglu-input\"},[_c('mt-field',{attrs:{\"placeholder\":\"用户名\"},model:{value:(_vm.ruleForm.username),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"username\", $$v)},expression:\"ruleForm.username\"}}),_c('mt-field',{attrs:{\"placeholder\":\"请输入密码\",\"type\":\"password\"},model:{value:(_vm.ruleForm.password),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"password\", $$v)},expression:\"ruleForm.password\"}},[_c('p',[_vm._v(\"忘记密码\")])])],1),_c('span',[_vm._v(_vm._s(_vm.dengluCheck))]),_c('div',{staticClass:\"denglubtn\"},[_c('mt-button',{attrs:{\"type\":\"danger\",\"size\":\"large\"},nativeOn:{\"!click\":function($event){return _vm.denglu(_vm.ruleForm.username,_vm.ruleForm.password)}}},[_vm._v(\"登录\")])],1),_c('div',{staticClass:\"reg\",on:{\"click\":function($event){return _vm.goto('/reg')}}},[_vm._v(\"新用户注册\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <myHead></myHead>\r\n        <h1>登录</h1>\r\n        <div class=\"denglu-input\">\r\n            <mt-field  placeholder=\"用户名\" v-model=\"ruleForm.username\"></mt-field>\r\n            <mt-field  placeholder=\"请输入密码\" type=\"password\" v-model=\"ruleForm.password\"><p>忘记密码</p></mt-field>\r\n        </div>\r\n        <span>{{dengluCheck}}</span>\r\n        <div class=\"denglubtn\"><mt-button type=\"danger\" size=\"large\" @click.native.capture=\"denglu(ruleForm.username,ruleForm.password)\">登录</mt-button></div>\r\n        <div class=\"reg\" @click=\"goto('/reg')\">新用户注册</div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport { Field } from 'mint-ui';\r\nimport { Button } from 'mint-ui';\r\nimport myHead from \"../components/mineHead.vue\";\r\nimport CryptoJS from 'crypto-js';\r\nVue.component(Button.name, Button)\r\nVue.component(Field.name, Field);\r\nexport default {\r\n    name:\"login\",\r\n    data(){\r\n        return {\r\n            ruleForm: {\r\n                password: \"\",\r\n                username: \"\"\r\n            },\r\n            dengluCheck:\"\"\r\n        }\r\n    },\r\n    methods: {\r\n        goto(path){ \r\n        this.$router.push(path);\r\n        },\r\n        denglu(value1,value2){\r\n            //   if(this.ruleForm.autoLogin){\r\n            // 获取本地token\r\n            let token = localStorage.getItem('Authorization');//null/string\r\n            // 判断本地是否存在token\r\n            if(token){\r\n              // 校验token判断是否过期\r\n            }\r\n        //   }\r\n             let key = 'laoxie1234567890';//密钥\r\n            let iv = 'laoxielaoxie6666';//初始向量\r\n\r\n            key  = CryptoJS.enc.Utf8.parse(key);\r\n            iv   = CryptoJS.enc.Utf8.parse(iv);\r\n            var encrypted =CryptoJS.AES.encrypt(value2,key,{iv});\r\n            value2 = encrypted.toString();    //返回的是base64格式的密文（后端要与之匹配）\r\n            this.$axios.get('/login',{\r\n               params:{\r\n                uname:value1,\r\n                password:value2\r\n               }\r\n            })\r\n            .then(({ data }) => {\r\n                if(data.status === 200){\r\n\r\n                if (typeof data.data === \"string\") {\r\n                  let token = data.data;\r\n                // console.log('token:',token)\r\n                  // 保存token到本地\r\n                localStorage.setItem(\"Authorization\", token);\r\n                localStorage.uname=value1;\r\n                  // 保存token到store\r\n                  this.$store.commit(\"login\", token);\r\n                //   console.log(this.$store.state.dengluStatus)\r\n                }\r\n\r\n                // 登录成功后跳转目标页面/否则跳转首页\r\n                    // console.log(this.$route.query.redirect);\r\n                this.dengluCheck = \"\";    \r\n                let uname = this.ruleForm.username;\r\n                // console.log(uname)\r\n                this.$store.commit('changeuser',uname)\r\n                // console.log('已登录:'+111);\r\n                this.$store.commit('changeDenglu',false);\r\n                // console.log(this.$store.state.user)\r\n                \r\n                this.$router.replace(\"/mine\");\r\n                this.$store.commit('removeGoods');\r\n                this.$axios.get('/cart',{params:{uname:value1}})\r\n                .then(({data})=>{\r\n                    // console.log(data)\r\n                    if(data.status===200){\r\n                        console.log('111:',data.data)\r\n                        data.data.forEach(item=>{\r\n                             this.$store.commit('add2cart',item)\r\n                        })\r\n                      \r\n                    }else if(data.status==400){\r\n                        console.log('400')\r\n                    }\r\n                })\r\n                } else {\r\n                    this.dengluCheck = \"用户名或密码错误\";\r\n                }\r\n            })\r\n            \r\n        }\r\n    },\r\n    components:{\r\n        myHead\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nh1{\r\n    font-size:22px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n\r\n}\r\n\r\n.mint-field-other p{\r\n    font-size:14px;\r\n}\r\n#mymain{\r\n  margin:0 3%;\r\n}\r\n.denglubtn{\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-bottom:20px;\r\n}\r\n.mint-button{\r\n    width: 300px;\r\n    height: 40px;\r\n}\r\n.mint-cell .mint-cell-wrapper{\r\n    margin-bottom:20px;\r\n}\r\n.denglu-input{\r\n    margin-bottom:20px;\r\n}\r\n.reg{\r\n    font-size:14px;\r\n    text-align: right;\r\n    width: 70px;\r\n    float: right;\r\n}\r\nspan{\r\n    display: block;\r\n    color:red;\r\n    font-size:14px;\r\n    padding:7px 15px;\r\n    margin-bottom:10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=4ea5255e&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=4ea5255e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ea5255e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}